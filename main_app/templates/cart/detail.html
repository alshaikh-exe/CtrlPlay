{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/cart.css' %}">
{% endblock %}

{% block content %}
<div class="cart-container">
    <h1>Your Cart</h1>

    {% if cart.games.all %}
    <ul>
        {% for game in cart.games.all %}
        <li>
            <img src="{{ game.image }}" alt="{{ game.title }}" />
            <span class="game-title">{{ game.title }}</span> â€” <span class="game-price">${{ game.price }}</span>

            <form method="post" style="display:inline;">
                {% csrf_token %}
                <input type="hidden" name="action" value="remove" />
                <input type="hidden" name="game_id" value="{{ game.id }}" />
                <button type="submit" class="btn danger">Remove</button>
            </form>
        </li>
        {% endfor %}
    </ul>

    <p class="total"><strong>Total:</strong> <span class="actual-price">${{ cart.total_price }}</span></p>

    <form action="{% url 'checkout' %}" method="post">
        {% csrf_token %}
        <button type="submit" class="btn submit">Checkout</button>
    </form>

    {% else %}
    <p>Your cart is empty.</p>
    {% endif %}
</div>
{% endblock %}